<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
  </head>
  <body class="mdc-typography">
    <!-- Indentation is deliberately broken:
-->

<!--
<link href="node_modules/roboto-fontface/css/roboto/roboto-fontface.css" rel="stylesheet" type="text/css" />
-->
<link href="roboto-fontface.css" rel="stylesheet" type="text/css" />
<!--
<link href="node_modules/normalize.css/normalize.css" rel="stylesheet" type="text/css" />
-->
<link href="normalize.css" rel="stylesheet" type="text/css" />
<!--<link href="node_modules/material-design-icons/iconfont/material-icons.css" rel="stylesheet" type="text/css" />-->
<link href="material-icons.css" rel="stylesheet" type="text/css" />
<link href="site.css" rel="stylesheet" type="text/css" />
<script src="elm-mdc.js"></script>
<script src="elm.js"></script>
<script>
var getToday = function() {
  var now = new Date();
  return '' + now.getFullYear() + '-' + (1 + now.getMonth()) + "-" + now.getDate();
};

var state = window.localStorage.getItem('state');
if (state) {
  state = JSON.parse(state);
}
console.log(state);
var app = Elm.Main.fullscreen({
  today: getToday(),
  now: ''+new Date(),
  state: state,
});

var updateToday = function() {
  app.ports.todayUnsafe.send(getToday());
  window.setTimeout(updateToday, 10*1000);
};
window.setTimeout(updateToday, 10*1000);

var updateNow = function() {
  app.ports.nowUnsafe.send('' + new Date());
  window.setTimeout(updateNow, 500);
};
updateNow();

app.ports.persistUnsafe.subscribe(function(state) {
  window.localStorage.setItem('state', JSON.stringify(state));
});
</script>
